<div class="grid" data-masonry='{ "itemSelector": ".grid-item-adj"}'>
    {% for post in paginator.posts %}
    {% for file_name_author in site.data %}
    {% assign author = file_name_author[1][0] %}
    {% assign title = author.titles | where: 'id', post.title_id | first %}

    {% if title %}
    {% break %}
    {% endif %}
    {% endfor %}

    {% if title.preview or title.text or title.fragments %}
    <div class="grid-item-adj">
        {% assign fragment = title.fragments[0] %}
        {% if fragment %}
        <a href="../../../titles/{{title.id}}#{{fragment.number}}" class="card ">{% else %}<a
                href="../../../titles/{{title.id}}" class="card ">{% endif %}
            <div class="card-image"
                 style="border-radius: .175rem .175rem 0 0; background-image: url(/assets/img/{{title.image.name}}); background-position: center center; background-repeat: no-repeat; background-size: 30rem auto;">
                <div class="black-background-preview div-padding-preview-header">

                    {% if title.format-title == 'italic' %}
                    <span class="title-post-italic">{{ title.name }}</span><span
                        class="date-post"> ({{ title.year }})</span>
                    {% elsif title.format-title == 'quotes' %}
                    <span class="title-post-none">«{{ title.name }}»</span><span
                        class="date-post"> ({{ title.year }})</span>
                    {% else %}
                    <span class="title-post-none">{{ title.name }}</span><span
                        class="date-post"> ({{ title.year }})</span>
                    {% endif %}
                    <br>
                    <span class="author-post">{{ author.name }}</span>
                </div>

            </div>

            <div class="div-padding-preview-body">
                {% if fragment.preview %}
                <p>{{ fragment.preview }}</p>
                {% elsif fragment.text %}
                <p>{{ fragment.text | truncate: 500 }}</p>
                {% elsif title.preview %}
                <p>{{ title.preview }}</p>
                {% elsif title.text %}
                <p> {{ title.text | truncate: 500 }}</p>
                {% endif %}
            </div>
        </a>
    </div>
    {% endif %}
    {% endfor %}


    <div id="lightgallery">
        {% for post in paginator.posts %}
        {% for file_name_author in site.data %}
        {% assign author = file_name_author[1][0] %}
        {% assign title = author.titles | where: 'id', post.title_id | first %}

        {% if title %}
        {% break %}
        {% endif %}
        {% endfor %}

        {% if title.preview or title.text or title.fragments %}
        {% else %}
        <a href="/assets/img/original_{{title.image.name}}"
           data-sub-html="<i>{{ title.name }}</i> ({{ title.year }}), <span> {{ author.name }} </span>">
            <div class="grid-item-adj">

                <img src="/assets/img/{{title.image.name}}" width="1500px" height="300px" class="centered-and-cropped"
                     alt="{{title.name}}"/>
                <div class="punctum-actions-container">
                    <div class="prevent-parent-click"><span
                            class="title-punctum"><i>{{ title.name }}</i> ({{ title.year }})</span>
                        &nbsp;<i url="{{post.url}}" class="fa punctum-icon fa-share-square"></i>
                        &nbsp;<i url="{{post.url}}" class="fa punctum-icon fa-facebook-square"></i>
                        &nbsp;<i url="{{post.url}}" class="fa punctum-icon fa-twitter-square"></i>
                    </div>
                </div>

            </div>
        </a>
        {% endif %}
        {% endfor %}
    </div>
</div>
{% if paginator.total_pages > 1 %}
<br>
{% include pagination_links.html %}
{% endif %}